set(target_name "mke2fs")

set(target_dir "${CMAKE_SOURCE_DIR}/src/e2fsprogs/misc")

set(target_srcs
        "${target_dir}/mke2fs.c"
        "${target_dir}/util.c"
        "${target_dir}/mk_hugefiles.c"
        "${target_dir}/default_profile.c"
)

add_executable(${target_name} ${target_srcs})
target_compile_options(${target_name} PUBLIC
    ${e2fsprogs_cflags}
)
target_include_directories(${target_name} PUBLIC
    ${e2fsprogs_includes}
    ${libext2_headers}
    ${CMAKE_SOURCE_DIR}/src/e2fsprogs/e2fsck
)
target_link_libraries(${target_name} PUBLIC
    ext2_misc
    ext2_quota
    ext2_blkid
    ext2_uuid
    ext2_com_err
    ext2_e2p
    ext2fs
    sparse
    base
    zlibstatic
)

set(target_name "tune2fs")

set(target_srcs
        "${target_dir}/tune2fs.c"
        "${target_dir}/util.c"
)

add_executable(${target_name} ${target_srcs})
target_compile_options(${target_name} PUBLIC
    ${e2fsprogs_cflags} "-DNO_RECOVERY"
)
target_include_directories(${target_name} PUBLIC
    ${e2fsprogs_includes}
    ${libext2_headers}
    ${CMAKE_SOURCE_DIR}/src/e2fsprogs/e2fsck
)
target_link_libraries(${target_name} PUBLIC
    ext2_quota
    ext2_blkid
    ext2_uuid
    ext2_com_err
    ext2_e2p
    ext2fs
)

# dropped badblocks lsattr blkid e4crypt e2image filefrag e2freefrag
# If you really want them, added by yourself