set(target_name "sparse")

set(libsparse_srcs_dir
    ${CMAKE_SOURCE_DIR}/src/core/libsparse
)

set(libsparse_srcs
    "${libsparse_srcs_dir}/backed_block.cpp"
    "${libsparse_srcs_dir}/output_file.cpp"
    "${libsparse_srcs_dir}/sparse.cpp"
    "${libsparse_srcs_dir}/sparse_crc32.cpp"
    "${libsparse_srcs_dir}/sparse_err.cpp"
    "${libsparse_srcs_dir}/sparse_read.cpp"
)

set(libsparse_cflags
    "-Werror"
)

add_library(${target_name} ${libsparse_srcs})
target_compile_options(${target_name} PUBLIC ${libsparse_cflags})
target_include_directories(${target_name} PUBLIC
    ${libsparse_headers}
    ${zlib_headers}
    ${libbase_headers}
)
